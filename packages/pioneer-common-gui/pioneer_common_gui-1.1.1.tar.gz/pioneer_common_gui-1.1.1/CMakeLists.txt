cmake_minimum_required (VERSION 3.1)
project(leddar_utils_cpp)
find_package (Eigen3 3.3 REQUIRED NO_MODULE)

if(WIN32)
    find_package (TBB REQUIRED NO_MODULE)
    message (STATUS "TBB: ${TBB_FOUND}")
endif(WIN32)

add_subdirectory(lcax)
add_subdirectory(pybind11)
pybind11_add_module(leddar_utils_cpp src/main.cpp)
if(WIN32)
    target_link_libraries (leddar_utils_cpp PRIVATE Eigen3::Eigen TBB::tbb)
    target_link_libraries(leddar_utils_cpp PRIVATE wsock32 ws2_32)
elseif(UNIX)
    target_link_libraries (leddar_utils_cpp PRIVATE Eigen3::Eigen tbb)
    target_compile_options(leddar_utils_cpp PRIVATE -std=c++1y -O3 -Wall -fmessage-length=0 -fPIC)
endif()
