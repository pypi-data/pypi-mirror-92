{"version":3,"sources":["oauthTokensView.es6.js"],"names":[],"mappings":";;AAAA,CAAC,YAAW;;AAGZ,QAAM,yDAAN;AACA,QAAM,6FAAN;;AAGA;;;AAGA,QAAM,iBAAiB,QAAQ,MAAR,CAAe,QAAf,CAAwB,MAAxB,CAA+B;AAClD,kBAAU,EAAE,QAAF,CAAW;AACjB,oBAAQ,EADS;AAEjB,yBAAa,EAFI;AAGjB,wBAAY;AAHK,SAAX,EAIP,QAAQ,MAAR,CAAe,QAAf,CAAwB,SAAxB,CAAkC,QAJ3B;AADwC,KAA/B,CAAvB;;AASA;;;AAGA,QAAM,qBAAqB,QAAQ,MAAR,CAAe,YAAf,CAA4B,MAA5B,CAAmC;AAC1D,kBAAU,EAAE,QAAF,6DADgD;;AAK1D,wBAAgB;AACZ,sBAAU;AADE,SAL0C;;AAS1D;;;AAGA,wBAZ0D,8BAYvC;AAAA;;AACf,eAAG,OAAH,CAAW;AACP,qBAAK,KAAK,KAAL,CAAW,GAAX,CAAe,QAAf,CADE;AAEP,wBAAQ,QAFD;AAGP,yBAAS;AAAA,2BAAM,MAAK,KAAL,CAAW,OAAX,CAAmB,SAAnB,CAAN;AAAA,iBAHF;AAIP,uBAAO;AAAA,2BAAO,MAAM,IAAI,SAAJ,IAAiB,mBAAvB,CAAP;AAAA;AAJA,aAAX;AAMH;AAnByD,KAAnC,CAA3B;;AAuBA;;;AAGA,OAAG,eAAH,GAAqB,SAAS,IAAT,CAAc,MAAd,CAAqB;AACtC,8GAGQ,SAHR,sBADsC;;AAStC;;;;;;;;;;;AAWA,kBApBsC,sBAoB3B,OApB2B,EAoBlB;AAChB,iBAAK,UAAL,GAAkB,IAAI,SAAS,UAAb,CAAwB,QAAQ,MAAhC,EAAwC;AACtD,uBAAO;AAD+C,aAAxC,CAAlB;AAGH,SAxBqC;;;AA0BtC;;;;;;;AAOA,cAjCsC,oBAiC7B;AACL,iBAAK,GAAL,CAAS,IAAT,CAAc,KAAK,QAAnB;AACA,iBAAK,MAAL,GAAc,KAAK,CAAL,CAAO,mBAAP,CAAd;AACA,iBAAK,SAAL,GAAiB,IAAI,QAAQ,MAAR,CAAe,QAAnB,CAA4B;AACzC,0BAAU,kBAD+B;AAEzC,uBAAO,IAAI,QAAQ,MAAR,CAAe,IAAnB,CAAwB,EAAxB,EAA4B;AAC/B,gCAAY,KAAK;AADc,iBAA5B;AAFkC,aAA5B,CAAjB;;AAOA,iBAAK,SAAL,CACK,MADL,GACc,GADd,CAEK,QAFL,CAEc,cAFd,EAGK,SAHL,CAGe,KAAK,MAHpB;;AAKA,mBAAO,IAAP;AACH;AAjDqC,KAArB,CAArB;AAqDC,CArGD","file":"oauthTokensView.js","sourcesContent":["(function() {\n\n\nconst emptyText = gettext('You do not have any OAuth2 tokens.');\nconst xhrUnknownErrorText = gettext('An unexpected error occurred. Could not delete OAuth2 token.');\n\n\n/**\n * A model representing an OAuth token.\n */\nconst OAuthTokenItem = Djblets.Config.ListItem.extend({\n    defaults: _.defaults({\n        apiURL: '',\n        application: '',\n        showRemove: true,\n    }, Djblets.Config.ListItem.prototype.defaults),\n});\n\n\n/**\n * A view representing a single OAuthTokenItem.\n */\nconst OAuthTokenItemView = Djblets.Config.ListItemView.extend({\n    template: _.template(dedent`\n        <span class=\"config-token-name\"><%- application %></span>\n    `),\n\n    actionHandlers: {\n        'delete': '_onDeleteClicked',\n    },\n\n    /**\n     * Delete the OAuth2 token.\n     */\n    _onDeleteClicked() {\n        RB.apiCall({\n            url: this.model.get('apiURL'),\n            method: 'DELETE',\n            success: () => this.model.trigger('destroy'),\n            error: xhr => alert(xhr.errorText || xhrUnknownErrorText),\n        });\n    },\n});\n\n\n/**\n * A view for managing OAuth2 tokens.\n */\nRB.OAuthTokensView = Backbone.View.extend({\n    template: dedent`\n        <div class=\"oauth-token-list\">\n         <div class=\"config-forms-list-empty box-recessed\">\n          ${emptyText}\n         </div>\n        </div>\n    `,\n\n    /**\n     * Initialize the view.\n     *\n     * Args:\n     *     options (object):\n     *         The view options.\n     *\n     * Option Args:\n     *     tokens (array of object):\n     *         The serialized token attributes.\n     */\n    initialize(options) {\n        this.collection = new Backbone.Collection(options.tokens, {\n            model: OAuthTokenItem,\n        });\n    },\n\n    /**\n     * Render the view.\n     *\n     * Returns:\n     *     RB.OAuthTokensView:\n     *     This view.\n     */\n    render() {\n        this.$el.html(this.template);\n        this._$list = this.$('.oauth-token-list');\n        this._listView = new Djblets.Config.ListView({\n            ItemView: OAuthTokenItemView,\n            model: new Djblets.Config.List({}, {\n                collection: this.collection,\n            }),\n        });\n\n        this._listView\n            .render().$el\n            .addClass('box-recessed')\n            .prependTo(this._$list);\n\n        return this;\n    },\n});\n\n\n})();\n"]}