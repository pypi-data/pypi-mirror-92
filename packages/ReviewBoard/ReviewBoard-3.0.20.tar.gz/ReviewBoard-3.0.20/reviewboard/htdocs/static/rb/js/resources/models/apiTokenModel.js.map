{"version":3,"sources":["apiTokenModel.es6.js"],"names":[],"mappings":";;AAAA;;;AAGA,GAAG,QAAH,GAAc,GAAG,YAAH,CAAgB,MAAhB,CAAuB;AACjC;;;;;;;AAOA,YARiC,sBAQtB;AACP,eAAO,EAAE,QAAF,CAAW;AACd,wBAAY,IADE;AAEd,kBAAM,IAFQ;AAGd,oBAAQ,EAHM;AAId,sBAAU;AAJI,SAAX,EAKJ,GAAG,YAAH,CAAgB,SAAhB,CAA0B,QAA1B,EALI,CAAP;AAMH,KAfgC;;;AAiBjC,kBAAc,WAjBmB;;AAmBjC;;;;;;;AAOA,OA1BiC,iBA0B3B;AACF,YAAM,MAAM,aAAa,KAAK,GAAL,CAAS,iBAAT,KAA+B,EAA5C,IACA,YADA,GACe,KAAK,GAAL,CAAS,UAAT,CADf,GACsC,cADlD;;AAGA,eAAO,KAAK,KAAL,KAAe,GAAf,QAAwB,GAAxB,GAA8B,KAAK,EAAnC,MAAP;AACH,KA/BgC;;;AAiCjC;;;;;;;AAOA,UAxCiC,oBAwCxB;AACL,eAAO;AACH,kBAAM,KAAK,GAAL,CAAS,MAAT,CADH;AAEH,oBAAQ,KAAK,SAAL,CAAe,KAAK,GAAL,CAAS,QAAT,CAAf;AAFL,SAAP;AAIH,KA7CgC;;;AA+CjC;;;;;;;;;;;AAWA,qBA1DiC,6BA0Df,GA1De,EA0DV;AACnB,eAAO;AACH,wBAAY,IAAI,KADb;AAEH,kBAAM,IAAI,IAFP;AAGH,oBAAQ,IAAI;AAHT,SAAP;AAKH;AAhEgC,CAAvB,EAiEX;AACC,qBAAiB;AACb,mBAAW,EADE;AAEb,kBAAU;AACN,uBAAW;AACP,qBAAK;AACD,2BAAO,CAAC,KAAD,EAAQ,MAAR,EAAgB,SAAhB,CADN;AAED,2BAAO,CAAC,GAAD;AAFN;AADE;AADL,SAFG;AAUb,gBAAQ;AACJ,uBAAW;AACP,qBAAK;AACD,2BAAO,CAAC,GAAD,CADN;AAED,2BAAO;AAFN;AADE;AADP;AAVK;AADlB,CAjEW,CAAd","file":"apiTokenModel.js","sourcesContent":["/**\n * An API token.\n */\nRB.APIToken = RB.BaseResource.extend({\n    /**\n     * Return defaults for the model attributes.\n     *\n     * Returns:\n     *     object:\n     *     The default values for new model instances.\n     */\n    defaults() {\n        return _.defaults({\n            tokenValue: null,\n            note: null,\n            policy: {},\n            userName: null\n        }, RB.BaseResource.prototype.defaults());\n    },\n\n    rspNamespace: 'api_token',\n\n    /**\n     * Return the URL for syncing the model.\n     *\n     * Returns:\n     *     string:\n     *     The URL to use when making HTTP requests.\n     */\n    url() {\n        const url = SITE_ROOT + (this.get('localSitePrefix') || '') +\n                    'api/users/' + this.get('userName') + '/api-tokens/';\n\n        return this.isNew() ? url : `${url}${this.id}/`;\n    },\n\n    /**\n     * Return a JSON-serializable representation of the model.\n     *\n     * Returns:\n     *     object:\n     *     An object suitable for passing into JSON.stringify.\n     */\n    toJSON() {\n        return {\n            note: this.get('note'),\n            policy: JSON.stringify(this.get('policy'))\n        };\n    },\n\n    /**\n     * Parse the response from the server.\n     *\n     * Args:\n     *     rsp (object):\n     *         The response from the server API endpoint.\n     *\n     * Returns:\n     *     object:\n     *     The parsed attribute values.\n     */\n    parseResourceData(rsp) {\n        return {\n            tokenValue: rsp.token,\n            note: rsp.note,\n            policy: rsp.policy\n        };\n    }\n}, {\n    defaultPolicies: {\n        readWrite: {},\n        readOnly: {\n            resources: {\n                '*': {\n                    allow: ['GET', 'HEAD', 'OPTIONS'],\n                    block: ['*']\n                }\n            }\n        },\n        custom: {\n            resources: {\n                '*': {\n                    allow: ['*'],\n                    block: []\n                }\n            }\n        }\n    }\n});\n"]}