{"version":3,"sources":["fileAttachmentCommentModel.es6.js"],"names":[],"mappings":";;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+BA,GAAG,qBAAH,GAA2B,GAAG,WAAH,CAAe,MAAf,CAAsB;AAC7C,cAAU,EAAE,QAAF,CAAW;AACjB,qCAA6B,IADZ;AAEjB,mCAA2B,IAFV;AAGjB,0BAAkB,IAHD;AAIjB,wBAAgB,IAJC;AAKjB,kBAAU,IALO;AAMjB,mBAAW,IANM;AAOjB,uBAAe;AAPE,KAAX,EAQP,GAAG,WAAH,CAAe,SAAf,CAAyB,QAAzB,EARO,CADmC;;AAW7C,kBAAc,yBAX+B;AAY7C,oBAAgB,CAAC,8BAAD,EAAiC,iBAAjC,CAZ6B;;AAc7C,mBAAe,EAAE,QAAF,CAAW;AACtB,qCAA6B,iCADP;AAEtB,0BAAkB,oBAFI;AAGtB,kBAAU,WAHY;AAItB,mBAAW,YAJW;AAKtB,uBAAe;AALO,KAAX,EAMZ,GAAG,WAAH,CAAe,SAAf,CAAyB,aANb,CAd8B;;AAsB7C,qBAAiB,CACb,6BADa,EAEb,kBAFa,EAGf,MAHe,CAGR,GAAG,WAAH,CAAe,SAAf,CAAyB,eAHjB,CAtB4B;;AA2B7C,uBAAmB,CACf,UADe,EAEf,eAFe,EAGf,WAHe,EAIjB,MAJiB,CAIV,GAAG,WAAH,CAAe,SAAf,CAAyB,iBAJf,CA3B0B;;AAiC7C,iBAAa,EAAE,QAAF,CAAW;AACpB,0BAAkB,GAAG,eAAH,CAAmB,cADjB;AAEpB,qCAA6B,GAAG,eAAH,CAAmB;AAF5B,KAAX,EAGV,GAAG,WAAH,CAAe,SAAf,CAAyB,WAHf,CAjCgC;;AAsC7C;;;;;;;;;;;AAWA,qBAjD6C,6BAiD3B,GAjD2B,EAiDtB;AACnB,YAAM,SAAS,GAAG,WAAH,CAAe,SAAf,CAAyB,iBAAzB,CAA2C,IAA3C,CACX,IADW,EACL,GADK,CAAf;;AAGA,eAAO,cAAP,GAAwB,IAAI,GAAG,cAAP,CAAsB,IAAI,eAA1B,EAA2C;AAC/D,mBAAO;AADwD,SAA3C,CAAxB;AAGA,eAAO,gBAAP,GAA0B,OAAO,cAAP,CAAsB,EAAhD;;AAEA,YAAI,IAAI,4BAAR,EAAsC;AAClC,mBAAO,yBAAP,GAAmC,IAAI,GAAG,cAAP,CAC/B,IAAI,4BAD2B,EACG;AAC9B,uBAAO;AADuB,aADH,CAAnC;;AAKA,mBAAO,2BAAP,GACI,OAAO,yBAAP,CAAiC,EADrC;AAEH;;AAED,eAAO,MAAP;AACH,KArE4C;;;AAuE7C;;;;;;;;;;;;;;;;;AAiBA,YAxF6C,oBAwFpC,KAxFoC,EAwF7B,OAxF6B,EAwFpB;AACrB,YAAI,EAAE,GAAF,CAAM,KAAN,EAAa,kBAAb,KAAoC,CAAC,MAAM,gBAA/C,EAAiE;AAC7D,mBAAO,GAAG,qBAAH,CAAyB,OAAzB,CAAiC,0BAAxC;AACH;;AAED,eAAO,OAAO,IAAP,EAAa,QAAb,CAAsB,IAAtB,CAA2B,IAA3B,EAAiC,KAAjC,EAAwC,OAAxC,CAAP;AACH;AA9F4C,CAAtB,EA+FxB;AACC,aAAS;AACL,oCAA4B;AADvB;AADV,CA/FwB,CAA3B","file":"fileAttachmentCommentModel.js","sourcesContent":["/**\n * A comment on a file attachment.\n *\n * Model Attributes:\n *     diffAgainstFileAttachmentID (number):\n *         The ID of the file attachment that is the \"new\" side of a comment on\n *         a file diff.\n *\n *     diffAgainstFileAttachment (RB.FileAttachment):\n *         The file attachment that is the \"new\" side of a comment on a file\n *         diff.\n *\n *     fileAttachmentID (number):\n *         The ID of the file attachment that the comment is on, or the ID of\n *         the file attachment that is the \"old\" side of a comment on a file\n *         diff.\n *\n *     fileAttachment (RB.FileAttachment):\n *         The file attachment that the comment is on, or the ID of the file\n *         attachment that is the \"old\" side of a comment on a file diff.\n *\n *     linkText (string):\n *         The text used to describe a link to the file. This may differ\n *         depending on the comment.\n *\n *     reviewURL (string):\n *         The URL for the file attachment review UI for the comment.\n *\n *     thumbnailHTML (string):\n *         The HTML representing a thumbnail, if any, for this comment.\n */\nRB.FileAttachmentComment = RB.BaseComment.extend({\n    defaults: _.defaults({\n        diffAgainstFileAttachmentID: null,\n        diffAgainstFileAttachment: null,\n        fileAttachmentID: null,\n        fileAttachment: null,\n        linkText: null,\n        reviewURL: null,\n        thumbnailHTML: null\n    }, RB.BaseComment.prototype.defaults()),\n\n    rspNamespace: 'file_attachment_comment',\n    expandedFields: ['diff_against_file_attachment', 'file_attachment'],\n\n    attrToJsonMap: _.defaults({\n        diffAgainstFileAttachmentID: 'diff_against_file_attachment_id',\n        fileAttachmentID: 'file_attachment_id',\n        linkText: 'link_text',\n        reviewURL: 'review_url',\n        thumbnailHTML: 'thumbnail_html'\n    }, RB.BaseComment.prototype.attrToJsonMap),\n\n    serializedAttrs: [\n        'diffAgainstFileAttachmentID',\n        'fileAttachmentID'\n    ].concat(RB.BaseComment.prototype.serializedAttrs),\n\n    deserializedAttrs: [\n        'linkText',\n        'thumbnailHTML',\n        'reviewURL'\n    ].concat(RB.BaseComment.prototype.deserializedAttrs),\n\n    serializers: _.defaults({\n        fileAttachmentID: RB.JSONSerializers.onlyIfUnloaded,\n        diffAgainstFileAttachmentID: RB.JSONSerializers.onlyIfUnloadedAndValue\n    }, RB.BaseComment.prototype.serializers),\n\n    /**\n     * Deserialize comment data from an API payload.\n     *\n     * Args:\n     *     rsp (object):\n     *         The response from the server.\n     *\n     * Returns:\n     *     object:\n     *     Attribute values to set on the model.\n     */\n    parseResourceData(rsp) {\n        const result = RB.BaseComment.prototype.parseResourceData.call(\n            this, rsp);\n\n        result.fileAttachment = new RB.FileAttachment(rsp.file_attachment, {\n            parse: true\n        });\n        result.fileAttachmentID = result.fileAttachment.id;\n\n        if (rsp.diff_against_file_attachment) {\n            result.diffAgainstFileAttachment = new RB.FileAttachment(\n                rsp.diff_against_file_attachment, {\n                    parse: true\n                });\n\n            result.diffAgainstFileAttachmentID =\n                result.diffAgainstFileAttachment.id;\n        }\n\n        return result;\n    },\n\n    /**\n     * Perform validation on the attributes of the model.\n     *\n     * This will check the file attachment ID along with the default\n     * comment validation.\n     *\n     * Args:\n     *     attrs (object):\n     *         Model attributes to validate.\n     *\n     *     options (object):\n     *         Additional options for the operation.\n     *\n     * Returns:\n     *     string:\n     *     An error string, if appropriate.\n     */\n    validate(attrs, options) {\n        if (_.has(attrs, 'fileAttachmentID') && !attrs.fileAttachmentID) {\n            return RB.FileAttachmentComment.strings.INVALID_FILE_ATTACHMENT_ID;\n        }\n\n        return _super(this).validate.call(this, attrs, options);\n    }\n}, {\n    strings: {\n        INVALID_FILE_ATTACHMENT_ID: 'fileAttachmentID must be a valid ID'\n    }\n});\n"]}