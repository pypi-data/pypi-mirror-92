.\" Man page generated from reStructuredText.
.
.TH "PYCHROOT" "1" "Jan 26, 2021" "0.10.4" "pychroot"
.SH NAME
pychroot \- an extended chroot equivalent
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.SH SYNOPSIS
.sp
pychroot [\-h] [\-\-version] [\-\-no\-mounts] [\-\-hostname HOSTNAME] [\-\-skip\-chdir] [\-B SRC[:DEST]] [\-R SRC[:DEST]] [\-\-ro SRC[:DEST]] path ...
.SH DESCRIPTION
.sp
pychroot is an extended \fBchroot(1)\fP equivalent that also provides support for
automatically handling bind mounts. By default, the proc and sysfs filesystems
are mounted to their respective /proc and /sys locations inside the chroot as
well as bind mounting /dev and /etc/resolv.conf from the host system.
.sp
In addition to the defaults, the user is able to specify custom bind mounts.
For example, the following command will recursively bind mount the user\(aqs home
directory at the same location inside the chroot directory:
.sp
pychroot \-R /home/user ~/chroot
.sp
This allows a user to easily set up a custom chroot environment without having
to resort to scripted mount handling or other methods.
.SH POSITIONAL ARGUMENTS
.INDENT 0.0
.TP
.B path
path to newroot
.TP
.B command
Optional command to run.
.sp
Similar to chroot(1), if unspecified this defaults to $SHELL from the
host environment and if that\(aqs unset it executes /bin/sh.
.UNINDENT
.SH BASE OPTIONS
.INDENT 0.0
.TP
.B \-h\fP,\fB  \-\-help
Show this help message and exit. To get more
information see the related man page.
.TP
.B \-\-version
Show this program\(aqs version information and exit.
.sp
When running from within a git repo or a version
installed from git the latest commit hash and date will
be shown.
.UNINDENT
.SH CHROOT OPTIONS
.INDENT 0.0
.TP
.B \-\-no\-mounts
Disable the default bind mounts which can be used to obtain a standard
chroot environment that you\(aqd expect when using chroot(1).
.TP
.BI \-\-hostname \ HOSTNAME
Specify the chroot hostname. In order to set the domain name as well,
pass an FQDN instead of a singular hostname.
.TP
.B \-\-skip\-chdir
Do not change the current working directory to \(aq/\(aq.
.sp
Unlike chroot(1), this currently doesn\(aqt limit you to only using it
when the new root isn\(aqt \(aq/\(aq. In other words, you can use a new chroot
environment on the current host system rootfs with one caveat: any
absolute paths will use the new rootfs.
.UNINDENT
.INDENT 0.0
.TP
.B \-B SRC[:DEST], \-\-bind SRC[:DEST]
Specify a custom bind mount.
.sp
In order to mount the same source to multiple destinations, use the
SRC:DEST syntax. For example, the following will bind mount \(aq/srv/data\(aq
to /srv/data and /home/user/data in the chroot:
.INDENT 7.0
.INDENT 3.5
.sp
.nf
.ft C
pychroot \-B /srv/data \-B /srv/data:/home/user/data /path/to/chroot
.ft P
.fi
.UNINDENT
.UNINDENT
.TP
.B \-R SRC[:DEST], \-\-rbind SRC[:DEST]
specify custom recursive bind mount
.TP
.B \-\-ro SRC[:DEST], \-\-readonly SRC[:DEST]
Specify a custom readonly bind mount.
.sp
Readonly, recursive bind mounts aren\(aqt currently supported on Linux so
this has to be a standalone option for now. Once they are, support for
them and other mount attributes will be added as an extension to the
mount point argument syntax.
.UNINDENT
.SH EXAMPLE USAGE
.sp
Pass through the host system\(aqs ssh agent in order to support regular ssh auth
for a specific user in the chroot:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pychroot \-R /home/user \-\-ro $SSH_AUTH_SOCK \-\-ro /etc/passwd \-\-ro /etc/shadow /path/to/chroot /bin/bash
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Use the chroot environment while retaining access to the host file system:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pychroot \-\-skip\-chdir /path/to/chroot /bin/bash
.ft P
.fi
.UNINDENT
.UNINDENT
.sp
Set the chroot environment hostname to \(aqchroot\(aq and the domain to \(aqfoo.org\(aq:
.INDENT 0.0
.INDENT 3.5
.sp
.nf
.ft C
pychroot \-\-hostname chroot.foo.org /path/to/chroot /bin/bash
.ft P
.fi
.UNINDENT
.UNINDENT
.SH REPORTING BUGS
.sp
Please submit an issue via github:
.sp
\fI\%https://github.com/pkgcore/pychroot/issues\fP
.SH SEE ALSO
.sp
chroot(1)
.SH AUTHOR
Tim Harder
.SH COPYRIGHT
2014-2018, pychroot contributors
.\" Generated by docutils manpage writer.
.
