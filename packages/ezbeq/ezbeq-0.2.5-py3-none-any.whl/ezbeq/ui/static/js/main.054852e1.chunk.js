(this.webpackJsonpezbeq=this.webpackJsonpezbeq||[]).push([[0],{138:function(e,t,n){"use strict";n.r(t);var a=n(9),r=n(0),c=n.n(r),o=n(13),i=n.n(o),s=(n(129),n(18)),u=n(16),l=n.n(u),d=n(23),f=n(7),p=n(27),j=n(58),h=n(8),b=n(104),O=n(193),g=n(195),x=n(75),m=n(191),A=n(143),w=n(41),v=n(199),E=n(113),S=n(142),y=n(144),C=n(196),T=n(103),I=n.n(T),L=n(100),k=n.n(L),R=n(102),Q=n.n(R),B=n(54),U="/api/1",V=new function e(){var t=this;Object(B.a)(this,e),this.getAuthors=function(){return t.doGet("authors")},this.getYears=function(){return t.doGet("years")},this.getAudioTypes=function(){return t.doGet("audiotypes")},this.getMeta=function(){return t.doGet("meta")},this.doGet=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(U,"/").concat(t),{method:"GET"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.get".concat(t," failed, HTTP status ").concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.appendTo=function(e,t,n){return n&&n.length>0?"".concat(e).concat(-1===e.indexOf("?")?"?":"&").concat(t,"=").concat(n.join(",")):e},this.search=Object(d.a)(l.a.mark((function e(){var n,a,r,c,o,i=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=i.length>0&&void 0!==i[0]?i[0]:null,a=i.length>1&&void 0!==i[1]?i[1]:null,r=i.length>2&&void 0!==i[2]?i[2]:null,c=t.appendTo(t.appendTo(t.appendTo("".concat(U,"/search"),"authors",n),"years",a),"audioTypes",r),e.next=6,fetch(c,{method:"GET"});case 6:if((o=e.sent).ok){e.next=9;break}throw new Error("EzBeq.search failed, HTTP status ".concat(o.status));case 9:return e.next=11,o.json();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)}))),this.load=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.search());case 1:case"end":return e.stop()}}),e)}))),this.sendFilter=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(U,"/minidsp/").concat(n),{method:"PUT",body:JSON.stringify({id:t}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((a=e.sent).ok){e.next=5;break}throw new Error("EzBeq.sendFilter failed, HTTP status ".concat(a.status));case 5:return e.next=7,a.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),this.clearSlot=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(U,"/minidsp/").concat(t),{method:"DELETE"});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.clearSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.activateSlot=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(U,"/minidsp/").concat(t),{method:"PUT",body:JSON.stringify({command:"activate"}),headers:{"Content-Type":"application/json",Accept:"application/json"}});case 2:if((n=e.sent).ok){e.next=5;break}throw new Error("EzBeq.activateSlot failed, HTTP status ".concat(n.status));case 5:return e.next=7,n.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.getMinidspConfig=Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.doGet("minidsps"));case 1:case"end":return e.stop()}}),e)})))},D=n(192),N=n(194),G=n(101),K=n.n(G),P=n(77),z=n(112),M=n(197),Y=n(98),q=n.n(Y),J=n(99),F=n.n(J),H=n(111),Z=function(e){var t=e.items,n=e.selectedValues,r=e.label,c=e.placeholder,o=void 0===c?"":c,i=e.noOptionsText,s=e.limitTags,u=e.onToggleOption,l=e.onCreateOption,d=e.onClearOptions,f=e.getOptionLabel,p=void 0===f?function(e){return e}:f,j=e.isInView,h=void 0===j?function(e){return!0}:j;return Object(a.jsx)(M.a,{multiple:!0,size:"small",disableCloseOnSelect:!0,freeSolo:"undefined"!==typeof d,selectOnFocus:!0,handleHomeEndKeys:!0,limitTags:s,options:t,value:n,noOptionsText:i,onChange:function(e,t,n){"select-option"===n||"remove-option"===n?u&&u(t):"clear"===n?d&&d():"create-option"===n?l&&l(t):console.log("Event: ".concat(e," Value: ").concat(t," Reason: ").concat(n))},renderOption:function(e,t){var n,r=t.selected;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(H.a,{color:"primary",icon:Object(a.jsx)(q.a,{fontSize:"small"}),checkedIcon:Object(a.jsx)(F.a,{fontSize:"small"}),style:{marginRight:8},checked:r}),Object(a.jsx)("div",{style:(n=e,{textDecoration:h(n)?"none":"line-through"}),children:p(e)})]})},renderInput:function(e){return Object(a.jsx)(z.a,Object(P.a)(Object(P.a)({},e),{},{label:r,placeholder:o}))},getOptionLabel:p,debug:!0})};Z.defaultProps={limitTags:5,items:[],selectedValues:[]};var X=Z,W=Object(j.a)((function(e){return{root:{flexGrow:1,width:"100wh",height:"100vh","& > *":{margin:e.spacing(1)}},noLeft:{marginLeft:"0px"},noLeftTop:{marginLeft:"0px",marginTop:"0px"},title:{flexGrow:1,marginLeft:e.spacing(1)},search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(h.c)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(h.c)(e.palette.common.white,.25)},marginLeft:0,width:"50%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{padding:e.spacing(0,2),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,0),paddingLeft:"calc(1em + ".concat(e.spacing(4),"px)"),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:"12ch","&:focus":{width:"20ch"}}),advancedFilter:{marginLeft:"4px",marginRight:"0px"},smallAvatar:{width:e.spacing(3),height:e.spacing(3)}}})),_=function(){var e=Object(D.a)("(prefers-color-scheme: dark)"),t=c.a.useMemo((function(){return Object(b.a)({palette:{type:e?"dark":"light"}})}),[e]),n=W(),o=Object(r.useState)([]),i=Object(f.a)(o,2),u=i[0],p=i[1],j=Object(r.useState)([]),h=Object(f.a)(j,2),T=h[0],L=h[1],R=Object(r.useState)([]),B=Object(f.a)(R,2),U=B[0],G=B[1],P=Object(r.useState)([]),z=Object(f.a)(P,2),M=z[0],Y=z[1],q=Object(r.useState)({}),J=Object(f.a)(q,2),F=J[0],H=J[1],Z=Object(r.useState)([]),_=Object(f.a)(Z,2),$=_[0],ee=_[1],te=Object(r.useState)([]),ne=Object(f.a)(te,2),ae=ne[0],re=ne[1],ce=Object(r.useState)([]),oe=Object(f.a)(ce,2),ie=oe[0],se=oe[1],ue=Object(r.useState)([]),le=Object(f.a)(ue,2),de=le[0],fe=le[1],pe=Object(r.useState)([]),je=Object(f.a)(pe,2),he=je[0],be=je[1],Oe=Object(r.useState)([]),ge=Object(f.a)(Oe,2),xe=ge[0],me=ge[1],Ae=Object(r.useState)([]),we=Object(f.a)(Ae,2),ve=we[0],Ee=we[1],Se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=Object(r.useState)(null!==e?e:[]),n=Object(f.a)(t,2),a=n[0],c=n[1];return[a,function(e){c(e.target.value)}]}(""),ye=Object(f.a)(Se,2),Ce=ye[0],Te=ye[1],Ie=Object(r.useState)(!1),Le=Object(f.a)(Ie,2),ke=Le[0],Re=Le[1],Qe=Object(r.useState)(-1),Be=Object(f.a)(Qe,2),Ue=Be[0],Ve=Be[1],De=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n();case 2:a=e.sent,t(a);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(r.useEffect)((function(){De(p,V.load)}),[]),Object(r.useEffect)((function(){De(H,V.getMeta)}),[]);var Ne=function(e){fe(e.slots.map((function(t){return Object.assign(t,{active:null!==e.active&&e.active===t.id})})))};Object(r.useEffect)((function(){De(Ne,V.getMinidspConfig)}),[]),Object(r.useEffect)((function(){De(L,V.getAuthors)}),[]),Object(r.useEffect)((function(){De(G,V.getYears)}),[]),Object(r.useEffect)((function(){De(Y,V.getAudioTypes)}),[]),Object(r.useEffect)((function(){var e=function(e){return!(he.length&&!(he.indexOf(e.author)>-1)||xe.length&&!(xe.indexOf(e.year)>-1)||ve.length&&!e.audioTypes.some((function(e){return ve.indexOf(e)>-1}))||Ce&&!e.title.toLowerCase().includes(Ce.toLowerCase()))};De(ee,(function(){return u.filter(e)}))}),[u,ve,xe,he,Ce]),Object(r.useEffect)((function(){De(re,(function(){return Object(s.a)(new Set($.map((function(e){return e.year}))))})),De(se,(function(){return Object(s.a)(new Set($.map((function(e){return e.audioTypes})).flat()))}))}),[$]);var Ge=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=$.find((function(e){return e.id===t})),e.next=3,V.sendFilter(a.id,n);case 3:r=e.sent,Ne(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.clearSlot(t);case 2:n=e.sent,Ne(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pe=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V.activateSlot(t);case 2:n=e.sent,Ne(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ze=[{field:"id",headerName:" ",width:25,valueFormatter:function(e){return"".concat(e.value+1).concat(e.getValue("active")?"*":"")}},{field:"actions",headerName:"Actions",width:120,renderCell:function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(w.a,{"aria-label":"send",disabled:-1===Ue,onClick:function(){return Ge(Ue,e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(k.a,{})}),Object(a.jsx)(w.a,{"aria-label":"activate",onClick:function(){return Pe(e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(K.a,{})}),Object(a.jsx)(w.a,{"aria-label":"clear",onClick:function(){return Ke(e.row.id)},color:"primary",edge:"start",children:Object(a.jsx)(Q.a,{})})]})}},{field:"last",headerName:"Loaded",flex:.45},{field:"active",headerName:"Active",hide:!0}],Me=[{field:"title",headerName:"Title",flex:.6,renderCell:function(e){return e.row.url?Object(a.jsx)("a",{href:e.row.url,target:"_beq",children:e.value}):e.value}},{field:"audioTypes",headerName:"Audio Type",flex:.4}],Ye=function(e){return e.toString().padStart(2,"0")};return Object(a.jsxs)(O.a,{theme:t,children:[Object(a.jsx)(N.a,{}),Object(a.jsxs)("div",{className:n.root,children:[Object(a.jsx)(g.a,{position:"static",className:n.noLeftTop,children:Object(a.jsxs)(m.a,{children:[Object(a.jsx)(v.a,{alt:"beqcatalogue",variant:"rounded",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAHmUExURRUoRhsuTgQUKAIGEwcTJwkUKDhCUgAAABUnRRcqSxMnRAoVKhcoRRYpSQUNHBEeNCIRIgcSJBIkRBwoPRQoRwsVJwEGKRgrTBIfPa8ABf+gLFw5JhUiOK7XAP+lKwwaMQIDBsUDAxEkRgoiSPudLE5pEz6uyM8DAwYKGmeCCwUIDRAiQRgkORxjihcpRwwlQwMQIDosXf+rLJZq2QsfODUQHx0uQd4CAAsaJxxWa0C0ztICAj9UGbQABEO61LjjACAlLiYsNxYmISUzVlULGEZiFbsCBAEWKgsZLLXfAC0pTAEOKAoqSlU6KL3pAC80P8w0c8h3Lh0SJBpJYE01KE45Kb1yLl5GKWd9A22HBi5BGz9PaotaKj1LY0dUax8yUSUwQyAoScgCAmomT8IzcLstZNg3eVtDjY1lzSdifxQTJXVMpjqivBdAVJ8GCseAMsuDMismKcEDBGILFyp1jC4RIXORC9kDAowDDJi8AjYrKOQDAYEIER1okNOFLKDIAt6QKxceKZZmKrlvLjFBXzBBX1ENGqgxaSQeNUIfN4soVyVeeoFev5gtYLAsYmRMmVkaMDo5Qp5x4wYRKjwgOWVQPgwrPG5JnlhHP1I8MxxWgFduG7huLhE2U5ZiOjhVLcJ0LjyqxOcUrVYAAAJzSURBVDjLhdP3V9pQFAfwEPNqyECCIEsQmYIaREBExAoiInXvvbd111FX1e699/pXe2MYaj3t94d7cl8+eUlOcrHc/wQTiqv9xjVpN6VBZOzhuOSvjD8YqxdBZFhRqqAoiqTcbjeVCSwO1wvANVqK8RiGMcrJZDIpHKXCk4pRE4BIg0JcZR53zHRMu7OEVzTUA5hQk+enqcmZuY65Z01sdg9SPQGgSkqmLng5+2p2uqJImQXSKgD5KcBQDR6PJ4/jsoKU5l8ApPSFd8E7L6Oz4hJQUpIFr/fdaxmNQEhZlr26A4bNL39e9lTQCIQGQqZAWRoouoPB4CcOIUQkgouLzyUkKS27AEj17Rp73Z0SGtGylRq7vaZbw14GEhEkqqtlK3V2e103IYLC9C3Ib0flRz8LhPjKIT6uSH0JmL8PDgwODe0M7tiiA07nQPQ95ysEkCcC3lx1r9nQ5nS2GZrv1jYbDDdrC1RIlQI8z/DKawAtEwFjtpjNFstvW6MtGoUyhDfabI3VBJECjOXt2vr6Wvuvzvudra1QRjZ+9PX1beAoAz4arTpj/4nRWnl2Vmk1nvQbddbK/luqDPiis+p0vccARkYAHPfqYKE3A+Ahv+r1Pfi+vlV/egplH++BHj5KeoeWD2GtVru9F9bGY7G4Nry3DW3Yj4s7JNRMy5uAIxSIxXcdB4eHB47deCwQcgQeNanoEgAyAE+niouL/auOzdDWVmjTseqHdsrfhBIuYS4YllQ+kcu78CW5XI4QlCW8S+gJxJ0PTg4PwofjCIcQhFBVQoEfwySOnkvDs2oNfTWowpQe3twcDt4o50pM2en+V/4ADiuBy0gwQ9YAAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII=",className:n.smallAvatar}),Object(a.jsx)(A.a,{className:n.title,variant:"h6",noWrap:!0,children:"ezbeq"}),Object(a.jsxs)("div",{className:n.search,children:[Object(a.jsx)("div",{className:n.searchIcon,children:Object(a.jsx)(I.a,{})}),Object(a.jsx)(E.a,{placeholder:"Search\u2026",classes:{root:n.inputRoot,input:n.inputInput},inputProps:{"aria-label":"search"},value:Ce,onChange:Te,size:"small"})]}),Object(a.jsx)(S.a,{className:n.advancedFilter,control:Object(a.jsx)(y.a,{checked:ke,onChange:function(){Re((function(e){return!e}))},size:"small"})})]})}),ke?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X,{items:T,selectedValues:he,label:"Author",onToggleOption:function(e){return be(e)},onClearOptions:function(){return be([])}}),Object(a.jsx)(X,{items:U,selectedValues:xe,label:"Year",onToggleOption:function(e){return me(e)},onCreateOption:function(e){return function(e){var t=U.filter((function(t){return e.some((function(e){return e===t||"".concat(t).indexOf(e)>-1}))}));me(t)}(e)},onClearOptions:function(){return me([])},getOptionLabel:function(e){return"".concat(e)},isInView:function(e){return 0===ae.length||ae.indexOf(e)>-1}}),Object(a.jsx)(X,{items:M,selectedValues:ve,label:"Audio Types",onToggleOption:function(e){return Ee(e)},onCreateOption:function(e){return function(e){var t=M.filter((function(t){return e.some((function(e){return e===t||t.toLowerCase().indexOf(e.toLowerCase())>-1}))}));Ee(t)}(e)},onClearOptions:function(){return Ee([])},isInView:function(e){return 0===ie.length||ie.indexOf(e)>-1}})]}):null,Object(a.jsx)(C.a,{container:!0,direction:"column",className:n.noLeft,children:Object(a.jsx)(C.a,{item:!0,style:{height:"190px",width:"100%"},children:Object(a.jsx)(x.a,{rows:de,columns:ze,autoPageSize:!0,hideFooter:!0,density:"compact"})})}),$.length?Object(a.jsx)(C.a,{container:!0,className:n.noLeft,children:Object(a.jsx)(C.a,{item:!0,style:{height:"".concat(window.innerHeight-306,"px"),width:"100%"},children:Object(a.jsx)(x.a,{rows:$,columns:Me,pageSize:100,density:"compact",sortModel:[{field:"title",sort:"asc"}],onRowSelected:function(e){return Ve(e.data.id)}})})}):null,F?Object(a.jsx)(C.a,{container:!0,justify:"center",className:n.noLeft,children:Object(a.jsx)(C.a,{item:!0,children:Object(a.jsxs)(A.a,{align:"center",variant:"caption",color:"textSecondary",children:["BEQCatalogue: ",function(e){if(e){var t=new Date(0);return t.setUTCSeconds(e),"".concat(t.getFullYear()).concat(Ye(t.getMonth()+1)).concat(Ye(t.getDate()),"_").concat(Ye(t.getHours())).concat(Ye(t.getMinutes())).concat(Ye(t.getSeconds()))}return"?"}(F.created)]})})}):null]})]})};i.a.render(Object(a.jsx)(c.a.StrictMode,{children:Object(a.jsx)(_,{})}),document.getElementById("root"))}},[[138,1,2]]]);
//# sourceMappingURL=main.054852e1.chunk.js.map