
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Django SMS &#8212; django-sms 0.1.0 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="django-sms">
<h1>Django SMS<a class="headerlink" href="#django-sms" title="Permalink to this headline">¶</a></h1>
<a class="reference external image-reference" href="https://pypi.org/project/django-sms/"><img alt="PyPI" src="https://img.shields.io/pypi/v/django-sms?color=156741&amp;logo=python&amp;logoColor=ffffff&amp;style=for-the-badge" /></a>
<a class="reference external image-reference" href="https://github.com/roaldnefs/django-sms/actions"><img alt="GitHub Workflow Status" src="https://img.shields.io/github/workflow/status/roaldnefs/django-sms/tests?color=156741&amp;label=CI&amp;logo=github&amp;style=for-the-badge" /></a>
<a class="reference external image-reference" href="https://pypi.org/project/django-sms/"><img alt="PyPI - Python Version" src="https://img.shields.io/pypi/pyversions/django-sms?color=156741&amp;logo=python&amp;logoColor=white&amp;style=for-the-badge" /></a>
<a class="reference external image-reference" href="https://pypi.org/project/django-sms/"><img alt="PyPI - Django Version" src="https://img.shields.io/pypi/djversions/django-sms?color=156741&amp;logo=django&amp;logoColor=ffffff&amp;style=for-the-badge" /></a>
<p><strong>django-sms</strong> is a Django app for sending SMS with interchangeable backends. The module is heavily based upon and structured the same way as the <code class="docutils literal notranslate"><span class="pre">django.core.mail</span></code> module.</p>
<ul class="simple">
<li><p><a class="reference external" href="#sending-sms">Sending SMS</a></p>
<ul>
<li><p><a class="reference external" href="#quick-example">Quick example</a></p></li>
<li><p><a class="reference external" href="#send_sms">send_sms()</a></p></li>
<li><p><a class="reference external" href="#examples">Examples</a></p></li>
<li><p><a class="reference external" href="#the-message-class">The **Message** class</a></p>
<ul>
<li><p><a class="reference external" href="#message-objects">Message Objects</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#sms-backends">SMS backends</a></p>
<ul>
<li><p><a class="reference external" href="#obtaining-an-instance-of-an-sms-backend">Obtaining an instance of an SMS backend</a></p>
<ul>
<li><p><a class="reference external" href="#console-backend">Console backend</a></p></li>
<li><p><a class="reference external" href="#in-memory-backend">In-memory backend</a></p></li>
<li><p><a class="reference external" href="#dummy-backend">Dummy backend</a></p></li>
</ul>
</li>
<li><p><a class="reference external" href="#defining-a-custom-sms-backend">Defining a custom SMS backend</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#acknowledgement">Acknowledgement</a></p></li>
</ul>
<div class="section" id="id1">
<h2>Sending SMS<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<p>These wrappers are provided to make sending SMS extra quick, to help test SMS sending during development, and to provide additional SMS gateways.</p>
<div class="section" id="id2">
<h3>Quick example<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>In two lines:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sms</span> <span class="kn">import</span> <span class="n">send_sms</span>

<span class="n">send_sms</span><span class="p">(</span>
    <span class="s1">&#39;Here is the message&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+12065550100&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;+441134960000&#39;</span><span class="p">],</span>
    <span class="n">fail_silently</span><span class="o">=</span><span class="kc">False</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The text messages are sent using one of the configured <a class="reference external" href="#sms-backends">SMS backends</a>.</p>
</div>
<div class="section" id="id4">
<h3>send_sms()<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p><strong>send_sms(_body, from_phone, to, fail*silently=False, connection=None*)</strong></p>
<p>In most cases, you can send text messages using <strong>sms.send_sms()</strong>.</p>
<p>The <strong>message</strong>, <strong>from_phone</strong> and <strong>to</strong> parameters are required.</p>
<ul class="simple">
<li><p><strong>message</strong>: A string.</p></li>
<li><p><strong>from_phone</strong>: A string. If <strong>None</strong>, django-sms will use the <strong>DEFAULT_FROM_SMS</strong> setting.</p></li>
<li><p><strong>to</strong>: A list of strings, each an phone number.</p></li>
<li><p><strong>fail_silently</strong>: A boolean. When it’s <strong>False</strong>, <strong>send_sms()</strong> will raise an exception if an error occurs. See the <a class="reference external" href="#sms-backends">SMS backends</a> documentation for a list of possible exceptions.</p></li>
<li><p><strong>connection</strong>: The optional SMS backend to use to send the text message. If unspecified, an instance of the default backend will be used. See the documentation of <a class="reference external" href="#sms-backends">SMS backends</a> for more details.</p></li>
</ul>
<p>The return value will be the number of successfully delivered text messages.</p>
</div>
</div>
<div class="section" id="id7">
<h2>Examples<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h2>
<p>This sends a text message to <em>+44 113 496 0000</em> and <em>+44 113 496 0999</em>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">send_sms</span><span class="p">(</span>
    <span class="s1">&#39;Here is the message&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+12065550100&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;+441134960000&#39;</span><span class="p">,</span> <span class="s1">&#39;+441134960999&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<div class="section" id="id8">
<h3>The <strong>Message</strong> class<a class="headerlink" href="#id8" title="Permalink to this headline">¶</a></h3>
<p>django-sms’ <strong>send_sms()</strong> function is  actually a thin wrapper that makes use of the <strong>Message</strong> class.</p>
<p>Not all features of the <strong>Message</strong> class will be available though the <strong>send_sms()</strong> and related wrapper functions. If you wish to use advanced features, you’ll need to create <strong>Message</strong> instances directly.</p>
<p><strong>Note</strong>: This is a design feature. <strong>send_sms()</strong> was originally the only interfaces django-sms provided.</p>
<p><strong>Message</strong> is responsible for creating the text message itself. The SMS backend is then responsible for sending the SMS.</p>
<p>For convenience, <em>Message*</em> provides a <strong>send()</strong> method for sending a single text message. If you need to send multiple text messages, the SMS backend API provides alternatives.</p>
<div class="section" id="id9">
<h4>Message Objects<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h4>
<p><strong>*class* Message</strong></p>
<p>The <strong>Message</strong> class is initialized with the following parameters (in the given order, if positional arguments are used). All parameters are optional and can be set at any time prior to calling the <strong>send()</strong> method.</p>
<ul class="simple">
<li><p><strong>body</strong>: The body text. This should be a plain text message.</p></li>
<li><p><strong>from_phone</strong>:</p></li>
<li><p><strong>to</strong>: A list or tuple of recipient phone numbers.</p></li>
<li><p><strong>connection</strong>: An SMS backend instance. Use this parameter if you want to use the same connection for multiple text messages. If omitted, a new connection is created when <strong>send()</strong> is called.</p></li>
</ul>
<p>For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sms</span> <span class="kn">import</span> <span class="n">Message</span>

<span class="n">message</span> <span class="o">=</span> <span class="n">Message</span><span class="p">(</span>
    <span class="s1">&#39;Here is the message&#39;</span><span class="p">,</span>
    <span class="s1">&#39;+12065550100&#39;</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;+441134960000&#39;</span><span class="p">]</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The class has the following methods:</p>
<ul class="simple">
<li><p><strong>send(fail_silently=False)</strong> sends the text message. If a connection was specified when the text message was constructed, that connection will be used. Otherwise, an instance of the default backend will be instantiated and used. If the keyword argument <strong>fail_silently</strong> is <strong>True</strong>, exceptions raised while sending the text messages will be quashed. An empty list of recipients will not raise an exception.</p></li>
</ul>
</div>
</div>
<div class="section" id="id10">
<h3>SMS backends<a class="headerlink" href="#id10" title="Permalink to this headline">¶</a></h3>
<p>The actual sending of an SMS is handled by the SMS backend.</p>
<p>The SMS backend class has the following methods:</p>
<ul class="simple">
<li><p><strong>open()</strong> instantiates a long-lived SMS-sending connection.</p></li>
<li><p><strong>close()</strong> closes the current SMS-sending connection.</p></li>
</ul>
<p>It can also be used as a context manager, which will automatically call <strong>open()</strong> and <strong>close()</strong> as needed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sms</span>

<span class="k">with</span> <span class="n">sms</span><span class="o">.</span><span class="n">get_connection</span><span class="p">()</span> <span class="k">as</span> <span class="n">connection</span><span class="p">:</span>
    <span class="n">sms</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
        <span class="s1">&#39;Here is the message&#39;</span><span class="p">,</span> <span class="s1">&#39;+12065550100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;+441134960000&#39;</span><span class="p">],</span>
        <span class="n">connection</span><span class="o">=</span><span class="n">connection</span>
    <span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>
    <span class="n">sms</span><span class="o">.</span><span class="n">Message</span><span class="p">(</span>
        <span class="s1">&#39;Here is the message&#39;</span><span class="p">,</span> <span class="s1">&#39;+12065550100&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;+441134960000&#39;</span><span class="p">],</span>
        <span class="n">connection</span><span class="o">=</span><span class="n">connection</span>
    <span class="p">)</span><span class="o">.</span><span class="n">send</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="id11">
<h3>Obtaining an instance of an SMS backend<a class="headerlink" href="#id11" title="Permalink to this headline">¶</a></h3>
<p>The <strong>sms.get_connection()</strong> function in <strong>sms</strong> returns an instance of the SMS backend that you can use.</p>
<p><strong>get_connection(_backend=None, fail_silently=False, *args, **kwargs_)</strong></p>
<p>By default, a call to <strong>get_connection()</strong> will return an instance of the SMS backend specified in <strong>SMS_BACKEND</strong>. If you specify the <strong>backend</strong> argument, an instance of that backend will be instantiated.</p>
<p>The <strong>fail_silently</strong> argument controls how the backend should handle errors. If <strong>fail_silently</strong> is True, exceptions during the SMS sending process will be silently ignored.</p>
<p>All other arguments are passed directly to the constructor of the SMS backend.</p>
<p>django-sms ships with several SMS sending backends. Some of these backends are only useful during testing and development. If you have special SMS sending requirements, you can <a class="reference external" href="#defining-a-custom-sms-backend">write your own SMS backend</a>.</p>
<div class="section" id="id12">
<h4>Console backend<a class="headerlink" href="#id12" title="Permalink to this headline">¶</a></h4>
<p>Instead of sending out real emails the console backend just writes the text messages that would be sent to the standard output. By default, the console backend writes to <strong>stdout</strong>. You can use a different stream-like object by providing the <strong>stream</strong> keyword argument when constructing the connection.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SMS_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;sms.backends.console.SmsBackend&#39;</span>
</pre></div>
</div>
<p>This backend is not intended for use in production - it is provided as a convenience that can be used during development.</p>
</div>
<div class="section" id="id13">
<h4>In-memory backend<a class="headerlink" href="#id13" title="Permalink to this headline">¶</a></h4>
<p>The <strong>‘locmen’</strong> backend stores text messages in a special attribute of the <strong>sms</strong> module. The <strong>outbox</strong> attribute is created when the first message is sent. It’s a list with an <strong>Message</strong> instance of each text message that would be sent.</p>
<p>To specify this backend, put the following in your settings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SMS_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;sms.backends.locmem.SmsBackend&#39;</span>
</pre></div>
</div>
<p>This backend is not intended for use in production - it is provided as a convenience that can be used during development.</p>
</div>
<div class="section" id="id14">
<h4>Dummy backend<a class="headerlink" href="#id14" title="Permalink to this headline">¶</a></h4>
<p>As the name suggests the dummy backend does nothing with your text messages. To specify this backend, put the following in your settings:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">SMS_BACKEND</span> <span class="o">=</span> <span class="s1">&#39;sms.backends.dummy.SmsBackend&#39;</span>
</pre></div>
</div>
<p>This backend is not intended for use in production - it is provided as a convenience that can be used during development.</p>
</div>
</div>
<div class="section" id="id15">
<h3>Defining a custom SMS backend<a class="headerlink" href="#id15" title="Permalink to this headline">¶</a></h3>
<p>If you need to change how text messages are sent you can write your own SMS backend. The <strong>SMS_BACKEND</strong> setting in your settings file is then the Python import path for you backend class.</p>
<p>Custom SMS backends should subclass <strong>BaseSmsBackend</strong> that is located in the <strong>sms.backends.base</strong> module. A custom SMS backend must implement the <strong>send_messages(messages)</strong> method. This methods receives a list of <strong>Message</strong> instances and returns the number of successfully delivered messages. If your backend has any concept of a persistent session or connection, you should also implement <strong>open()</strong> and <strong>close()</strong> methods. Refer to one of the existing SMS backends for a reference implementation.</p>
</div>
</div>
<div class="section" id="id16">
<h2>Acknowledgement<a class="headerlink" href="#id16" title="Permalink to this headline">¶</a></h2>
<p>This project is heavily based upon the <strong>django.core.mail</strong> module, with the modified work by <a class="reference external" href="https://github.com/roaldnefs">Roald Nefs</a>. The <a class="reference external" href="https://raw.githubusercontent.com/roaldnefs/django-sms/main/LICENSE.django">Django license</a> is included with <strong>django-sms</strong>.</p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="#">django-sms</a></h1>



<p class="blurb">A Django app for sending SMS with interchangeable backends.</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=roaldnefs&repo=django-sms&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="#">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, Roald Nefs.
      
      |
      <a href="_sources/index.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/roaldnefs/django-sms" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>